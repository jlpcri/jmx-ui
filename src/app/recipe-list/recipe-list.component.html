<!-- START - Search Field -->
<div class="container-fluid">
  <div class="container">
    <div class="row">
      <div class="col-md-8 form-group">
        <div class="row margin-bottom">
          <div class="help-container">
            <span class="far fa-question-circle hover-help-icon"></span>
            <div class="hover-help">
              Select which option you would like to use to search for a recipe.
            </div>
          </div>
          <div class="col-md-4 form-check custom-radio" *ngFor="let each of searchOptions">
            <input class="form-check-input custom-control-input"
                   type="radio" id="search_{{each.value}}"
                   name="searchOptions"
                   (change)="onChangeSelectOption($event)"
                   value="{{each.value}}" [(ngModel)]="searchOptionSelected">
            <label class="form-check-label custom-control-label" for="search_{{each.value}}">{{each.value}} Name</label>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-8 form-group">
        <div class="row input-icons">
          <div class="help-container">
            <span class="far fa-question-circle hover-help-icon"></span>
            <div class="hover-help">
              Type in the name of the recipe or ingredient that you are looking for. Then click on the recipe in the options below the search field.
            </div>
          </div>
          <span class="fas fa-search icon"></span>
          <ng-autocomplete class="form-control input-field"
                           [data]="firstNameList"
                           [searchKeyword]="nameListKey"
                           [placeHolder]=" searchOptionSelected === 'Recipe' ? 'Search Recipe(Product) Name': 'Search Ingredients(Component) Name' "
                           (selected)="selectEvent($event, searchOptionSelected)"
                           (inputChanged)="onChangeSearch($event, searchOptionSelected)"
                           (inputCleared)="onInputCleared()"
                           (inputFocused)="onFocused()"
                           [historyIdentifier]="firstNameListHistory"
                           [debounceTime]="400"
                           [isLoading]="isLoadingNameListFirst"
                           [minQueryLength]="0"
                           [itemTemplate]="itemTemplate"
                           [notFoundTemplate]="notFoundTemplate"
                           [(ngModel)]="searchItem">
          </ng-autocomplete>
          <ng-template #itemTemplate let-item>
            <a [innerHTML]="item.name"></a>
          </ng-template>
          <ng-template #notFoundTemplate let-notFound>
            <div [innerHTML]="notFound"></div>
          </ng-template>
        </div>

      </div>

      <div class="col-md-2 form-group" *ngIf="searchOptionSelected === 'Recipe'">
        <label for="bottleSizeSelected" class="custom-label-title">Bottle Size</label>
        <select class="custom-select" id="bottleSizeSelected"
                (change)="changeSize(bottleSizeSelected)"
                [(ngModel)]="bottleSizeSelected">
          <option *ngFor="let each of sizeRadioButtons" [value]="each">{{each}}mL</option>
        </select>
      </div>
      <div class="col-md-2 form-group" *ngIf="searchOptionSelected === 'Recipe'">
        <label for="nicStrengthSelected" class="custom-label-title">Nicotine Strength</label>
        <select class="custom-select" id="nicStrengthSelected"
                (change)="changeStrength(nicStrengthSelected)"
                [(ngModel)]="nicStrengthSelected">
          <option *ngFor="let each of strengthRadioButtons" [value]="each">{{each}}mg</option>
        </select>
      </div>
    </div>
  </div>
</div>

<div class="container" *ngIf="searchOptionSelected === 'Recipe'">
  <div class="help-container">
    <span class="far fa-question-circle hover-help-icon"></span>
    <div class="hover-help">
      The recipe you have selected will display in this section. It will reflect the recipe name, bottle size, and nicotine strength of the recipe.
    </div>
  </div>

  <div class="row search-results">
    <div class="col-md-8">
      <span class="custom-label-title">{{searchOptionSelected}} Name:</span><br>
      <h2 class="font-weight-bold">{{searchItem.name}}</h2>
    </div>
    <div class="col-md-2">
      <span class="custom-label-title">Bottle Size:</span><br>
      <h2 class="font-weight-bold" *ngIf="bottleSizeSelected.length > 0; else sizeStrengthNoValue">{{bottleSizeSelected}}mL</h2>
    </div>
    <div class="col-md-2">
      <span class="custom-label-title">Nicotine Strength:</span><br>
      <h2 class="font-weight-bold" *ngIf="nicStrengthSelected.length > 0; else sizeStrengthNoValue">{{nicStrengthSelected}}mg</h2>
    </div>
    <ng-template #sizeStrengthNoValue></ng-template>
  </div>
</div>

<div class="container" *ngIf="searchOptionSelected === 'Ingredients'">
  <div class="row">
    <div class="col-md-8 form-group">
      <div class="row input-icons">
        <span class="fas fa-search icon"></span>
        <ng-autocomplete class="form-control input-field"
                         [data]="secondNameList"
                         [searchKeyword]="nameListKey"
                         [placeHolder]="'Search Recipe(Product) Name'"
                         (selected)="selectEventSecond($event)"
                         (inputChanged)="onChangeSearchSecond()"
                         (inputFocused)="onFocusedSecond()"
                         (inputCleared)="onInputClearedSecond()"
                         [historyIdentifier]="secondNameListHistory"
                         [debounceTime]="400"
                         [isLoading]="isLoadingNameListSecond"
                         [itemTemplate]="itemTemplate"
                         [notFoundTemplate]="notFoundTemplate"
                         [(ngModel)]="searchItemSecond">
        </ng-autocomplete>
      </div>

    </div>

    <div class="col-md-2 form-group">
      <label for="bottleSizeSelectedSecond" class="custom-label-title">Bottle Size</label>
      <select class="custom-select" id="bottleSizeSelectedSecond"
              (change)="changeSizeSecond(bottleSizeSelectedSecond)"
              [(ngModel)]="bottleSizeSelectedSecond">
        <option *ngFor="let each of sizeRadioButtonsSecond" [value]="each">{{each}}mL</option>
      </select>
    </div>

    <div class="col-md-2 form-group">
      <label for="nicStrengthSelectedSecond" class="custom-label-title">Nicotine Strength</label>
      <select class="custom-select" id="nicStrengthSelectedSecond"
              (change)="changeStrengthSecond(nicStrengthSelectedSecond)"
              [(ngModel)]="nicStrengthSelectedSecond">
        <option *ngFor="let each of strengthRadioButtonsSecond" [value]="each">{{each}}mg</option>
      </select>
    </div>

  </div>

  <div class="container">
    <div class="help-container">
      <span class="far fa-question-circle hover-help-icon"></span>
      <div class="hover-help">
        The recipe you have selected will display in this section. It will reflect the recipe name, bottle size, and nicotine strength of the recipe.
      </div>
    </div>
    <div class="row search-results">
      <div class="col-md-8">
        <span class="custom-label-title">Recipe Name:</span><br>
        <h2 class="font-weight-bold">{{searchItemSecond.name}}</h2>
      </div>
      <div class="col-md-2">
        <span class="custom-label-title">Bottle Size:</span><br>
        <h2 class="font-weight-bold" *ngIf="bottleSizeSelectedSecond.length > 0; else sizeStrengthNoValue">{{bottleSizeSelectedSecond}}mL</h2>
      </div>
      <div class="col-md-2">
        <span class="custom-label-title">Nicotine Strength:</span><br>
        <h2 class="font-weight-bold" *ngIf="nicStrengthSelectedSecond.length > 0; else sizeStrengthNoValue">{{nicStrengthSelectedSecond}}mg</h2>
      </div>
      <ng-template #sizeStrengthNoValue></ng-template>
    </div>
  </div>

</div>
<!-- END Search Field -->

<!-- START - Recipe Display -->
<div class="container">
  <div class="row">
    <div class="col-md-4 align-items-start">
      <div class="help-container">
        <span class="far fa-question-circle hover-help-icon"></span>
        <div class="hover-help">
          The ratio of the ingredients will display in this e-liquid bottle to help you visualize the ratio between recipe ingredients.
        </div>
      </div>
      <!-- Juice Bottle -->
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="bottle"
           x="0px" y="0px" width="160px" height="500px" viewBox="0 0 206.1 719.1"
           enable-background="new 0 0 206.1 719.1" xml:space="preserve" class="juice-bottle">
					<line fill="none" stroke="#000000" stroke-width="4" x1="30.4" y1="100.2" x2="30.4" y2="152"/>
        <line fill="none" stroke="#000000" stroke-width="4" x1="42.2" y1="100.2" x2="42.2" y2="152"/>
        <line fill="none" stroke="#000000" stroke-width="4" x1="53.2" y1="100.2" x2="53.2" y2="152"/>
        <line fill="none" stroke="#000000" stroke-width="4" x1="65" y1="100.2" x2="65" y2="152"/>
        <line fill="none" stroke="#000000" stroke-width="4" x1="75.9" y1="100.2" x2="75.9" y2="152"/>
        <line fill="none" stroke="#000000" stroke-width="4" x1="87.7" y1="100.2" x2="87.7" y2="152"/>
        <line fill="none" stroke="#000000" stroke-width="4" x1="98.7" y1="100.2" x2="98.7" y2="152"/>
        <line fill="none" stroke="#000000" stroke-width="4" x1="110.5" y1="100.2" x2="110.5" y2="152"/>
        <line fill="none" stroke="#000000" stroke-width="4" x1="121.2" y1="100" x2="121.2" y2="151.8"/>
        <line fill="none" stroke="#000000" stroke-width="4" x1="133" y1="100" x2="133" y2="151.8"/>
        <line fill="none" stroke="#000000" stroke-width="4" x1="144" y1="100" x2="144" y2="151.8"/>
        <line fill="none" stroke="#000000" stroke-width="4" x1="155.8" y1="100" x2="155.8" y2="151.8"/>
        <line fill="none" stroke="#000000" stroke-width="4" x1="166.7" y1="100" x2="166.7" y2="151.8"/>
        <line fill="none" stroke="#000000" stroke-width="4" x1="178.5" y1="100" x2="178.5" y2="151.8"/>
        <path fill="none" stroke="#000000" stroke-width="4" stroke-miterlimit="10"
              d="M168.6,171.8H39.7v-11.3v11.3H24.3  c0,0-10.7,13.6,0,30.8h79.9h80.3c10.7-17.1,0-30.8,0-30.8H168.6v-11.3"/>
        <path fill="none" stroke="#000000" stroke-width="4" stroke-miterlimit="10"
              d="M168.5,202.5v15.3c0,4.4,19.5,6.5,19.6,12.9v463.7  c-0.2,12.7-19.2,11.9-19.2,11.9h-65.3h0H39.2c0,0-19,0.8-19.2-11.9V230.8c0-6.4,18.6-8.6,18.6-12.9v-15.3"/>
        <path fill="none" stroke="#000000" stroke-width="4"
              d="M104.2,160.5h83.3c0,0,0-20.5,0-68.7c-67.2-48.3-74-79-74-79h-9.3h-9.3  c0,0-6.8,30.7-74,79c0,48.2,0,68.7,0,68.7H104.2"/>
					</svg>
    </div>

    <div class="col-md-8">
      <div class="container">
        <div class="help-container">
          <span class="far fa-question-circle hover-help-icon"></span>
          <div class="hover-help">
            This table shows the measurements of recipe ingredients. Each ingredient has a color that will match a color on the e-liquid bottle.
          </div>
        </div>
        <div class="table-wrapper">
          <table class="table table-hover custom-table" aria-describedby="ingredientsTable">
            <thead class="custom-thead">
            <tr>
              <th scope="col">Ingredients</th>
              <th scope="col">Quantity</th>
              <th scope="col">Percentage</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let recipe of recipes">
              <td class="d-flex"><span class="fas fa-circle ing-icon ing-color-{{recipe.color}}"></span> <span class="d-flex">{{recipe.ingredients}}</span></td>
              <td>{{recipe.quantity}}mL</td>
              <td>{{recipe.percentage * 100}}%</td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- END - Recipe Display -->

<!-- START - Print Section -->
<div class="container-fluid section-padding gray-bg">
  <div class="container">
    <div class="row" *ngIf="printData.name.length > 0">
      <div class="col-sm-3">
      </div>
      <div class="col-sm-6">
        <div class="input-icons">
          <div class="help-container">
            <span class="far fa-question-circle hover-help-icon"></span>
            <div class="hover-help">
              Search for the location that you are creating the recipe for. Use the Export Label button to create a printable label.<br>
              Print button will be disable until you select store name.
            </div>
          </div>
          <span class="fas fa-search icon"></span>
          <ng-autocomplete class="form-control input-field"
                           [data]="printLocations"
                           [searchKeyword]="nameListKey"
                           [placeHolder]="'Search Store name'"
                           (selected)="selectEventLocation($event)"
                           (inputChanged)="onChangeSearchLocation()"
                           (inputCleared)="onInputClearedLocation()"
                           [historyIdentifier]="firstNameListHistory"
                           [debounceTime]="400"
                           [isLoading]="isLoadingLocation"
                           [minQueryLength]=""
                           [itemTemplate]="itemTemplate"
                           [notFoundTemplate]="notFoundTemplate"
                           [(ngModel)]="searchStoreName">
          </ng-autocomplete>
        </div>

        <div class="table-wrapper" id="printSection">
          <table aria-describedby="printSection">
            <tr>
              <th scope="col"></th>
            </tr>
            <tr style="font-weight: bold">{{printData.storeName}}</tr>
            <tr>{{printData.storeLocation}}</tr>
            <tr></tr>
            <tr>
              <td>
                <strong>{{printData.name}}</strong><br>
                {{printData.size}}ml&nbsp;&nbsp;&nbsp;&nbsp;{{printData.strength}}mg<br>
                {{printData.currentDate}}<br>
                {{printData.sku}}
              </td>
              <td>
                <qrcode [qrdata]="printData.sku"
                        [elementType]="'img'"
                        width="10"
                        [errorCorrectionLevel]="'M'"></qrcode>
              </td>
            </tr>
            <tr style="text-align: center">Lot #{{printData.batchId}}</tr>
          </table>
        </div>

        <div class="ml-auto">
          <button class="btn btn-secondary-custom btn-lg" style="float: right;"
                  [disabled]="isPrintLocationEmpty"
                  printSectionId="printSection"
                  ngxPrint>PRINT LABEL</button>
        </div>
      </div>
      <div class="col-sm-3">
      </div>
    </div>
  </div>
</div>
<!-- END Print Section -->
